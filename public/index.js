!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Poci=e():t.Poci=e()}(this,(()=>(()=>{"use strict";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Init:()=>c});class o{constructor(t,e,o){this.type=t,this.name=e,this.content=o}static element="element";static props="properties";static text="textNode"}class r extends o{constructor(t,e,r,a){super(o.element,t,null),this.$$label=a,this.props=r,this.children=e}}class a extends o{constructor(t,e){super(o.props,t,e??"")}}class n extends o{constructor(t){super(o.text,"",t??"")}}function s(t){let e=((new Date).getTime()*(o=1,i=50,Math.floor(Math.random()*(i-o+1))+o)).toString(36);var o,i;const l=((t,e)=>{const o=new Array(t.length);for(let r=0;r<t.length;r++)o[r]=e(t[r]);return o})(Object.keys(t.attributes),(o=>{const r=t.attributes[o];return"data-label"===r.nodeName?(e=r.nodeValue,null):new a(r.nodeName,r.nodeValue)})),c=new r(t.tagName.toLocaleLowerCase(),[],l,e);t.dataset.label=e;for(const e of t.childNodes)c.children.push(e.nodeType===Node.TEXT_NODE?new n(e.nodeValue):s(e));return c}function i(t,e){const o=null==e,r=e.$$label===t.dataset.label,a=t.tagName.toLocaleLowerCase()===e.name;if(o||!r||!a)return s(t);const{attributes:n}=t,l=Object.values(n),{props:c}=e;for(const e of l){if(!1===(()=>{for(const t of c)if("data-label"!==e.nodeName&&null!==t&&t.name!==e.nodeName)return!1})())return s(t)}let d=0;for(const o of t.childNodes){o.nodeType===Node.TEXT_NODE||d>=e.children.length||(e.children[d]=i(o,e.children[d]),d++)}return e}class l extends Error{constructor(t,e){super(`[error] : ${t}<${e}>`),this.msg=t,this.type=e}static ParameterInvalid="ParameterInvalid"}class c{#t;#e;#o;constructor(t,e={}){if(this.rootSelector=t,this.rootDOM=document.querySelector(t),null===this.rootDOM)throw new l("root is not found",l.ParameterInvalid);if("object"!=typeof e||null===e||Array.isArray(e))throw new l("data is not valid",l.ParameterInvalid);this.#e=s(this.rootDOM),this.#t=s(this.rootDOM),this.#o=e,this.data=e}set(t,e){this.#o[t]=e,this.data={...this.#o},this.rerender()}track(){this.#e=i(this.rootDOM,this.#e)}#r(t=this.rootDOM){t.removeAttribute("data-label","");for(let e=0;e<t.children.length;e++)this.#r(t.children[e])}pull(){this.#r(),this.rootSelector="",this.rootDOM=null,this.#e={},this.#t={},this.#o={},this.data={}}}return e})()));